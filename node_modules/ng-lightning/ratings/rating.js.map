{"version":3,"sources":["../../../temp/inline/ratings/rating.ts"],"names":[],"mappings":"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","file":"rating.js","sourceRoot":"","sourcesContent":["import {Component, Input, ChangeDetectionStrategy, Output, EventEmitter, HostListener,\n        HostBinding, ContentChild, ViewChild, TemplateRef, ChangeDetectorRef} from '@angular/core';\nimport {NglRatingIconTemplate} from './icons';\nimport {NglConfig, NglConfigurable} from '../config/config';\nimport {toBoolean} from '../util/util';\n\n\n@NglConfigurable()\nexport class NglRating {\n\n  range: number[] = [];\n  currentRate: number;\n\n   icon = 'favorite';\n   size: 'x-small' | 'small' | 'large';\n   set isReadonly(readonly: any) {\n    this.readonly = toBoolean(readonly);\n  }\n   set rate(rate: number) {\n    this.inputRate = rate;\n    this.currentRate = rate;\n  }\n\n   defaultTemplate: TemplateRef<any>;\n   iconTemplate: NglRatingIconTemplate;\n\n   set max(max: number | string) {\n    this._max = +max;\n    this.setRange();\n  }\n  get max() {\n    return this._max;\n  }\n\n   colorOn: string;\n   colorOff: string;\n\n   rateChange = new EventEmitter<number>();\n   hover = new EventEmitter<number>();\n\n  private _template: TemplateRef<any>;\n  private _max: number = 5;\n  private readonly = false;\n  private inputRate: number;\n\n  constructor(private config: NglConfig, private cd: ChangeDetectorRef) {\n    this.nglOnConfigChanges();\n  }\n\n  ngOnInit() {\n    this.setRange();\n  }\n\n  ngAfterContentInit() {\n    this._template = this.iconTemplate ? this.iconTemplate.templateRef : this.defaultTemplate;\n  }\n\n  nglOnConfigChanges() {\n    this.colorOn = this.config.get('ratingColorOn');\n    this.colorOff = this.config.get('ratingColorOff');\n  }\n\n  update(value: number) {\n    if (value < 1 || value > this.max || this.readonly || value === this.inputRate) return;\n    this.rateChange.emit(value);\n  }\n\n  enter(value: number) {\n    if (this.readonly) return;\n\n    this.currentRate = value;\n    this.hover.emit(value);\n  }\n\n  getFill(value: number) {\n    if (value <= this.currentRate) {\n      return 100;\n    }\n    if (Math.ceil(this.currentRate) < value) {\n      return 0;\n    }\n\n    return Math.round(100 * (this.currentRate % 1));\n  }\n\n   reset() {\n    this.currentRate = this.inputRate;\n  }\n\n  // Keyboard interactions\n  \n  \n  keyboardIncrease(evt: KeyboardEvent) {\n    evt.preventDefault();\n    this.update(this.inputRate + 1);\n  }\n\n  \n  \n  keyboardDecrease(evt: KeyboardEvent) {\n    evt.preventDefault();\n    this.update(this.inputRate - 1);\n  }\n\n  // ARIA\n   get ariaValuenow() {\n    return this.inputRate;\n  }\n\n  private setRange() {\n    this.range = Array.apply(null, {length: this.max}).map((value: any, index: number) => index + 1);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'ngl-rating',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `\n    <ng-template #t let-fill=\"fill\"><svg class=\"slds-icon\" [nglIcon]=\"icon\" [ngClass]=\"size ? 'slds-icon--' + size : ''\" [style.fill]=\"fill === 100 ? colorOn : colorOff\"></svg><svg class=\"slds-icon\" *ngIf=\"fill &gt; 0 &amp;&amp; fill &lt; 100\" [nglIcon]=\"icon\" [ngClass]=\"size ? 'slds-icon--' + size : ''\" [style.fill]=\"colorOn\" style=\"position:absolute; bottom:0\" [style.left.%]=\"fill - 100\" [xPos]=\"(100 - fill) + '%'\"></svg></ng-template><div class=\"slds-show--inline-block\" *ngFor=\"let r of range; let i = index\" (click)=\"update(r)\" (mouseenter)=\"enter(r)\" style=\"position: relative\"><ng-template [ngTemplateOutlet]=\"_template\" [ngTemplateOutletContext]=\"{$implicit: r &lt;= currentRate, index: i, fill: getFill(r)}\"></ng-template></div>\n  `,\n  host: {\n    'style': 'white-space: nowrap;',\n    'tabindex': '0',\n    'aria-valuemin': '0',\n    '[attr.aria-valuemax]': 'max',\n  },\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NglConfig, },\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'icon': [{ type: Input },],\n'size': [{ type: Input },],\n'isReadonly': [{ type: Input },],\n'rate': [{ type: Input },],\n'defaultTemplate': [{ type: ViewChild, args: ['t', ] },],\n'iconTemplate': [{ type: ContentChild, args: [NglRatingIconTemplate, ] },],\n'max': [{ type: Input },],\n'colorOn': [{ type: Input },],\n'colorOff': [{ type: Input },],\n'rateChange': [{ type: Output },],\n'hover': [{ type: Output },],\n'reset': [{ type: HostListener, args: ['mouseleave', ] },],\n'keyboardIncrease': [{ type: HostListener, args: ['keydown.ArrowUp', ['$event'], ] },{ type: HostListener, args: ['keydown.ArrowRight', ['$event'], ] },],\n'keyboardDecrease': [{ type: HostListener, args: ['keydown.ArrowDown', ['$event'], ] },{ type: HostListener, args: ['keydown.ArrowLeft', ['$event'], ] },],\n'ariaValuenow': [{ type: HostBinding, args: ['attr.aria-valuenow', ] },],\n};\n};\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}