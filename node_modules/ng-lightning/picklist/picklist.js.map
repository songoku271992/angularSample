{"version":3,"sources":["../../../temp/inline/picklist/picklist.ts"],"names":[],"mappings":"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","file":"picklist.js","sourceRoot":"","sourcesContent":["import {Component, ChangeDetectionStrategy, Input, Output, EventEmitter, ContentChild, ViewChild, ElementRef} from '@angular/core';\nimport 'rxjs/add/operator/filter';\nimport {NglPicklistItemTemplate} from './item';\nimport {NglPick} from '../pick/pick';\nimport {toBoolean} from '../util/util';\n\n\nexport class NglPicklist {\n\n  filteredData: any[];\n\n   set data(data: any[]) {\n    this._data = data;\n    this.filterData();\n  }\n  get data() {\n    return this._data;\n  }\n\n   set fluid(fluid: boolean | string) {\n    this._fluid = toBoolean(fluid);\n  }\n  get fluid() {\n    return this._fluid;\n  }\n\n   set disabled(disabled: boolean | string) {\n    this._disabled = toBoolean(disabled);\n  }\n  get disabled() {\n    return this._disabled;\n  }\n\n   dropdownListClass: any;\n\n   filterType: string | Function;\n   filterPlaceholder: string = '';\n\n   set open(value: boolean) {\n    this._open = value;\n    if (this.open && this.hasFilter) {\n      setTimeout(() => this.focusFilter());\n    }\n  }\n  get open() {\n    return this._open;\n  }\n   openChange = new EventEmitter();\n\n   itemTemplate: NglPicklistItemTemplate;\n\n   filterInput: ElementRef;\n\n  get hasFilter() {\n    return typeof(this.filterType) !== 'undefined';\n  }\n\n  private _data: any[];\n  private _open = false;\n  private _changeSubscription: any;\n  private _disabled = false;\n  private _fluid = false;\n  private filter = '';\n  private filterActiveIndex: number = 0;\n  private hasFilterFocus: boolean = false;\n\n  constructor(private pick: NglPick) {}\n\n  ngAfterContentInit() {\n    this._changeSubscription = this.pick.nglPickChange.filter(() => !this.pick.isMultiple)\n                                .subscribe(() => this.openChange.emit(false));\n  }\n\n  ngOnDestroy() {\n    if (this._changeSubscription) {\n      this._changeSubscription.unsubscribe();\n      this._changeSubscription = null;\n    }\n  }\n\n  filterData() {\n    this.filteredData = this._filterData();\n    this.setFilterActive(); // Keep active index in bounds\n  }\n\n  _filterData() {\n    if (!this.data || !this.hasFilter || !this.filter) {\n      return this.data;\n    }\n    const filter = <any>this.filterType;\n    switch (typeof(filter)) {\n      case 'string':\n        return this.data.filter(d => (filter ? d[filter] : d.toString()).toLowerCase().indexOf(this.filter.toLowerCase()) !== -1);\n      case 'function':\n        return this.data.filter(filter);\n      default:\n        throw new Error(`Invalid NglPicklist filter type (${typeof(this.filterType)}). The filter must be empty, a field name or a filter function.`);\n    }\n  }\n\n  isOptionActive(index: number) {\n    return this.hasFilter && this.filterActiveIndex === index;\n  }\n\n  onOptionHover(index: number) {\n    if (!this.hasFilterFocus) return;\n    this.filterActiveIndex = index;\n  }\n\n  filterChange(filter: string) {\n    this.filter = filter;\n    this.filterData();\n  }\n\n  setFilterActive(moves: number = 0, evt?: Event) {\n    if (evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n\n    this.filterActiveIndex = Math.max(Math.min(this.filterActiveIndex + moves, this.filteredData.length - 1), 0);\n  }\n\n  onFilterPick() {\n    if (!this.filteredData.length || this.filterActiveIndex < 0) return;\n    this.pick.selectOption(this.filteredData[this.filterActiveIndex]);\n  }\n\n  focusFilter() {\n    this.filterInput.nativeElement.focus();\n  }\n\n  onFilterFocus() {\n    this.filterActiveIndex = 0;\n    this.hasFilterFocus = true;\n  }\n\n  onFilterBlur() {\n    this.filterActiveIndex = -1;\n    this.hasFilterFocus = false;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'ngl-picklist[nglPick]',\n  template: `\n    <div class=\"slds-picklist\" nglDropdown [open]=\"open\" (openChange)=\"openChange.emit($event)\" [ngClass]=\"{'slds-picklist--fluid': fluid}\"><button class=\"slds-button slds-button--neutral slds-picklist__label\" type=\"button\" nglDropdownTrigger [disabled]=\"disabled\"><ng-content></ng-content><svg class=\"slds-icon\" nglIcon=\"down\"></svg></button><div class=\"slds-dropdown slds-dropdown--left\" [ngClass]=\"{ 'slds-p-top--none': hasFilter }\"><input class=\"slds-input\" *ngIf=\"hasFilter\" #filterInput type=\"text\" [attr.placeholder]=\"filterPlaceholder\" [ngModel]=\"filter\" (ngModelChange)=\"filterChange($event)\" (keydown.enter)=\"onFilterPick()\" (keydown.arrowdown)=\"setFilterActive(1, $event)\" (keydown.arrowup)=\"setFilterActive(-1, $event)\" (focus)=\"onFilterFocus()\" (blur)=\"onFilterBlur()\"><ul class=\"dropdown__list\" role=\"menu\" [ngClass]=\"dropdownListClass\"><li class=\"slds-dropdown__item\" *ngFor=\"let item of filteredData; let i = index\" [nglPickOption]=\"item\" nglPickActiveClass=\"slds-is-selected\" [class.slds-is-active]=\"isOptionActive(i)\" (mouseover)=\"onOptionHover(i)\"><a role=\"menuitem\" nglDropdownItem><p class=\"slds-truncate\"><svg class=\"slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small\" nglIcon=\"check\"></svg><ng-template [ngTemplateOutlet]=\"itemTemplate?.templateRef\" [ngTemplateOutletContext]=\"{$implicit: item}\"></ng-template></p></a></li></ul></div></div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [`\n    li.slds-is-active {\n      background-color: #F4F6F9;\n    }`,\n  ],\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NglPick, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'data': [{ type: Input },],\n'fluid': [{ type: Input },],\n'disabled': [{ type: Input },],\n'dropdownListClass': [{ type: Input },],\n'filterType': [{ type: Input, args: ['filter', ] },],\n'filterPlaceholder': [{ type: Input },],\n'open': [{ type: Input },],\n'openChange': [{ type: Output },],\n'itemTemplate': [{ type: ContentChild, args: [NglPicklistItemTemplate, ] },],\n'filterInput': [{ type: ViewChild, args: ['filterInput', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}